<div class="container">

    <div class="bloc-default">

        <h2>Gérer les catégories d'évennement</h2>

        <div class="header">
            
            <div class="input-container">
                <p-iconfield>
                    <p-inputicon class="pi pi-user" />
                    <input type="text" pInputText placeholder="Rechercher" [(ngModel)]="tastingCategoryService.search" />
                </p-iconfield>
            </div>

            <p-button (click)="prepareCreate()" label="Ajouter une catégorie" icon="pi pi-plus-circle" />

        </div>

        <p-treetable [value]="treeTable" [scrollable]="true" [tableStyle]="{'min-width':'50rem'}" [class]="mapSizeToClass(selectedSize)">
            <ng-template #header>
                <tr>
                    <th>Nom</th>
                    <th>Icone</th>
                    <th>Couleur</th>
                    <th>Actions</th>
                </tr>
            </ng-template>
            <ng-template #body let-treeNodeElement let-rowData="rowData">
                <tr [ttRow]="treeNodeElement">
                    <td>
                        <p-treetable-toggler [rowNode]="treeNodeElement" />
                        {{ rowData.name }}
                    </td>
                    <td>
                        <span class="material-icons-outlined">{{ rowData.icon }}</span>
                    </td>
                    <td>
                        {{ rowData.color }}
                    </td>
                    <td>
                        <button
                            pButton
                            pRipple
                            type="button"
                            icon="pi pi-plus-circle"
                            (click)="prepareCreate(treeNodeElement.node.data.id)"
                            severity="secondary"
                            text
                            rounded
                        ></button>
                        
                        <button
                            pButton
                            pRipple
                            type="button"
                            icon="pi pi-pen-to-square"
                            (click)="prepareEdit(treeNodeElement.node.data)"
                            text
                            rounded
                        ></button>

                        <button
                            pButton
                            pRipple
                            type="button"
                            icon="pi pi-trash"
                            (click)="prepareDelete(treeNodeElement.node.data, $event)"
                            text
                            rounded
                            severity="danger"
                        ></button>
                    </td>
                </tr>
            </ng-template>
        </p-treetable>

        <app-footer-table [itemCount]="tastingCategoryService.itemCount()" [(selectedSize)]="selectedSize" [page]="tastingCategoryService.page()" [limit]="tastingCategoryService.limit()" ></app-footer-table>

    </div>

</div>

<app-add-or-edit-tasting-category></app-add-or-edit-tasting-category>